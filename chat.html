<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ConectATI - Chat</title>
  <link rel="stylesheet" href="/css/chat_conectati.css" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
</head>
<body>
  <!-- Encabezado mobile -->
  <div class="header-mobile">
    <a href="/perfil.html"><img src="https://i.pravatar.cc/150?img=47" alt="Daniel Rojas" /></a>
    <h1>
      <div class="logo-circulo"></div>
      ConectATI
    </h1>
    <div class="acciones">
      <a href="/notificaciones.html"><i class="fas fa-bell"></i></a>
      <a href="/configuracion.html"><i class="fas fa-cog"></i></a>
    </div>
  </div>
  <!-- Sidebar -->
  <aside>
    <div>
      <div class="logo-conectati">
        <div class="logo-circulo"></div>
        <span>ConectATI</span>
      </div>
      <div class="menu">
        <a href="#">
          <span class="icono"><i class="fas fa-home"></i></span>
          <span class="texto">Inicio</span>
        </a>
        <a href="/notificaciones.html">
          <span class="icono"><i class="fas fa-bell"></i></span>
          <span class="texto">Notificaciones</span>
        </a>
        <a href="/amistades.html">
          <span class="icono"><i class="fas fa-user-friends"></i></span>
          <span class="texto">Amistades</span>
        </a>
        <a href="/chat.html">
          <span class="icono"><i class="fas fa-envelope"></i></span>
          <span class="texto">Mensajes</span>
        </a>
        <a href="/configuracion.html">
          <span class="icono"><i class="fas fa-cog"></i></span>
          <span class="texto">Configuraci√≥n</span>
        </a>
      </div>
    </div>

    <div class="perfil-contenedor">

      <button class="cerrar-sesion">Cerrar Sesi√≥n</button>

      <div class="perfil-detalle">
        <img src="https://i.pravatar.cc/150?img=47" alt="Daniel Rojas" />
        <div class="info">
          <div class="nombre">
            <strong>Daniel Rojas</strong>
            <span class="puntos">‚óè‚óè‚óè</span>
          </div>
          <small>@danroj</small>
        </div>
      </div>
    </div>
  </aside>

  <!-- √Årea de mensajes -->
  <div class="area-mensajes">
    <!-- Encabezados unificados -->
    <div class="fila-encabezados">
      <div class="encabezado-lista">
        <h2>Mensajes</h2>
      </div>
      <div class="encabezado-chat">
        <img src="https://i.pravatar.cc/150?img=47" alt="Ana Garc√≠a" />
        <strong>Ana Garc√≠a</strong>
      </div>
    </div>

    <div class="titulo-mobile">
      <h2>Mensajes</h2>
    </div>

    <!-- Encabezado del chat solo para mobile -->
    <div class="encabezado-chat-mobile" style="display: none;">
      <i class="fas fa-arrow-left btn-volver-chat"></i>
      <img id="chat-avatar" src="" alt="Avatar usuario" />
      <div class="nombre-chat-info">
        <strong id="chat-nombre">Nombre</strong>
        <small id="chat-usuario">@usuario</small>
      </div>
    </div>

    <!-- Lista y conversaci√≥n -->
    <div class="contenedor-mensajes">
      <!-- Lista lateral -->
      <div class="columna-central">
        <div class="chat-list">
          <div class="chat-user">
            <div class="chat-user-info">
              <img src="https://i.pravatar.cc/150?img=47" alt="Ana Garc√≠a" />
              <span>
                Ana Garc√≠a<br />
                <small>@anag</small>
              </span>
            </div>
            <i class="fas fa-trash" title="Eliminar chat"></i>
          </div>

          <div class="chat-user">
            <div class="chat-user-info">
              <img src="https://i.pravatar.cc/150?img=21" alt="Maria Per" />
              <span>
                Maria Per<br />
                <small>@mar</small>
              </span>
            </div>
            <i class="fas fa-trash" title="Eliminar chat"></i>
          </div>

          <div class="chat-user">
            <div class="chat-user-info">
              <img src="https://i.pravatar.cc/150?img=8" alt="Carlos Mendoza" />
              <span>
                Juana Pa<br />
                <small>@juana</small>
              </span>
            </div>
            <i class="fas fa-trash" title="Eliminar chat"></i>
          </div>
        </div>
        
         <!-- Solicitudes de mensajes -->
        <div class="solicitudes-chat">
          <h3>Solicitudes de Mensajes</h3>
          <div class="item-solicitud">
            <img src="https://i.pravatar.cc/150?img=21" alt="Carlos" />
            <div class="contenido">
              <strong>@carlosm</strong> <span class="nombre">Carlos Mendoza</span>
              <p>¬øPodemos hablar por aqu√≠?</p>
            </div>
            <div class="acciones">
              <i class="fas fa-check aceptar" title="Aceptar"></i>
              <i class="fas fa-times rechazar" title="Rechazar"></i>
            </div>
          </div>
          <!-- m√°s .item-solicitud si lo deseas -->
          <div class="item-solicitud">
            <img src="https://i.pravatar.cc/150?img=21" alt="Carlos" />
            <div class="contenido">
              <strong>@carlosm</strong> <span class="nombre">Carlos Mendoza</span>
              <p>¬øPodemos hablar por aqu√≠?</p>
            </div>
            <div class="acciones">
              <i class="fas fa-check aceptar" title="Aceptar"></i>
              <i class="fas fa-times rechazar" title="Rechazar"></i>
            </div>
          </div>
        </div>

      </div>

      <!-- Conversaci√≥n -->
      <div class="conversacion">
        <div class="chat-mensajes">
          <div class="mensaje recibido">
            ¬øQu√© deber√≠amos hacer?
          </div>
          <div class="mensaje enviado">
            ¬°Empecemos!
          </div>
          <div class="mensaje recibido">
            ¬øQu√© deber√≠amos hacer?
          </div>
          <div class="mensaje enviado">
            ¬°Empecemos!
          </div>
          <div class="mensaje recibido">
            ¬øQu√© deber√≠amos hacer?
          </div>
          <div class="mensaje enviado">
            ¬°Empecemos!
          </div>
          <div class="mensaje recibido">
            ¬øQu√© deber√≠amos hacer?
          </div> 
                
        </div>
        <div class="chat-input">
          <i class="fas fa-camera"></i>
          <input type="text" placeholder="Escribir mensaje..." />
          <i class="fas fa-microphone"></i>
          <i class="fas fa-image"></i>
          <i class="fas fa-paper-plane"></i>
        </div>
      </div>
    </div>
  </div>
  <!-- Men√∫ mobile -->
  <div class="menu-mobile">
    <a href="/index.html"><i class="fas fa-home"></i></a>
    <a href="/busqueda.html"><i class="fas fa-search"></i></a>
    <a href="/amistades.html"><i class="fas fa-user-friends"></i></a>
    <a href="/chat.html"><i class="fas fa-envelope"></i></a>
  </div>
</body>
<script>
  document.addEventListener("DOMContentLoaded", () => {
    const isMobile = () => window.innerWidth <= 768;

    const chatItems = document.querySelectorAll(".chat-user");
    const chatList = document.querySelector(".chat-list");
    const conversacion = document.querySelector(".conversacion");
    const encabezadoLista = document.querySelector(".encabezado-lista");
    const tituloMobile = document.querySelector(".titulo-mobile");
    const headerMobile = document.querySelector(".header-mobile");
    const chatInput = document.querySelector(".chat-input");
    const menuMobile = document.querySelector(".menu-mobile");
    const encabezadoChatMobile = document.querySelector(".encabezado-chat-mobile");
    const avatarMobile = document.getElementById("chat-avatar");
    const nombreMobile = document.getElementById("chat-nombre");
    const usuarioMobile = document.getElementById("chat-usuario");

    const avatarDesktop = document.querySelector(".encabezado-chat img");
    const nombreDesktop = document.querySelector(".encabezado-chat strong");

    // Volver atr√°s
    const btnVolver = encabezadoChatMobile.querySelector(".btn-volver-chat");
    btnVolver.addEventListener("click", () => {
      chatList.style.display = "block";
      conversacion.style.display = "none";
      encabezadoChatMobile.style.display = "none";
      encabezadoLista.style.display = "flex";
      headerMobile.style.display = "flex";
      tituloMobile.style.display = "block";
      chatInput.style.display = "none";
      menuMobile.style.display = "flex";
    });

    // Click en cualquier chat
    chatItems.forEach(item => {
      item.addEventListener("click", () => {
        const img = item.querySelector("img");
        const nameSpan = item.querySelector("span");
        const usuario = item.querySelector("small");

        const nombreTexto = nameSpan.childNodes[0].nodeValue.trim();
        const usuarioTexto = usuario.childNodes[0].nodeValue.trim();

        // üëâ Actualizar encabezado mobile
        avatarMobile.src = img.src;
        avatarMobile.alt = img.alt;
        nombreMobile.textContent = nombreTexto;
        usuarioMobile.textContent = usuarioTexto;

        // üëâ Actualizar encabezado desktop
        avatarDesktop.src = img.src;
        avatarDesktop.alt = img.alt;
        nombreDesktop.textContent = nombreTexto;

        if (isMobile()) {
          chatList.style.display = "none";
          conversacion.style.display = "flex";
          encabezadoLista.style.display = "none";
          encabezadoChatMobile.style.display = "flex";
          headerMobile.style.display = "none";
          tituloMobile.style.display = "none";
          menuMobile.style.display = "none";
          chatInput.style.display = "flex";
        }
      });
    });

    // Reset on resize
    window.addEventListener("resize", () => {
      if (!isMobile()) {
        chatList.style.display = "";
        conversacion.style.display = "";
        encabezadoLista.style.display = "";
        encabezadoChatMobile.style.display = "none";
        headerMobile.style.display = "";
        tituloMobile.style.display = "";
        chatInput.style.display = "";
        menuMobile.style.display = "";
      }
    });
  });

  function scrollToBottom() {
    const chatMensajes = document.querySelector('.chat-mensajes');
    if (chatMensajes) {
      chatMensajes.scrollTop = chatMensajes.scrollHeight;
    }
  }

  // Ejecuta al cargar
  window.addEventListener('load', scrollToBottom);

  // Tambi√©n cada vez que se abra un chat
  const chatItems = document.querySelectorAll(".chat-user");
  chatItems.forEach(item => {
    item.addEventListener("click", () => {
      setTimeout(scrollToBottom, 100); // Espera leve para asegurar que el contenido est√© visible
    });
  });
</script>


</html>
